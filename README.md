cat << EOF > README.md
# IFT6168_Project – Causal Inference and Counterfactual Modeling on NHL Shot Data

This project explores **causal modeling** and **counterfactual data augmentation** for **NHL shot prediction**. We combine traditional XGBoost modeling with structural causal inference using [DoWhy](https://github.com/py-why/dowhy) and evaluate the impact of generated counterfactuals on model performance.

---

## 📁 Repository Structure

\`\`\`plaintext
.
├── causal_counterfactual_pipeline.py  # Main pipeline for causal modeling & counterfactuals
├── compare_pc_ges_dag.py             # Compares PC algorithm DAG with GES DAG
├── data_acquisition.py               # Downloads and parses NHL play-by-play data
├── preprocessing.py                  # Feature engineering and preprocessing
├── requirements.txt                  # Python and system dependencies
├── README.md                         # This file
├── data/
│   └── processed_shot_events.csv     # Cleaned shot-level data (generated)
\`\`\`

---

## 🧪 Key Objectives

- ✅ Build directed acyclic graphs (DAGs) using **PC** and **GES** algorithms and compare their structures.
- ✅ Estimate causal effects of variables like \`emptyNetHome\`, \`powerplayHome\`, and \`shotType\` using **DoWhy**.
- ✅ Generate realistic **counterfactual scenarios** from model-boundary examples.
- ✅ Evaluate XGBoost model performance with and without counterfactual augmentation.

---

## 🚀 How to Run

### 1. Prerequisites

- **Python 3.8+** is recommended.
- Ensure you have \`pip\` installed for dependency management.

### 2. Install Dependencies

Install Python dependencies from the requirements file:

\`\`\`bash
pip install -r requirements.txt
\`\`\`

For **Linux** or **Google Colab**, install Graphviz system dependencies **before** installing \`pygraphviz\`:

\`\`\`bash
sudo apt-get update
sudo apt-get install -y graphviz libgraphviz-dev pkg-config
pip install pygraphviz \\
  --config-settings="--global-option=build_ext" \\
  --config-settings="--global-option=-I/usr/include/graphviz" \\
  --config-settings="--global-option=-L/usr/lib/graphviz/"
\`\`\`

### 3. Download and Parse NHL Data

Download and parse NHL play-by-play data:

\`\`\`bash
python data_acquisition.py
\`\`\`

### 4. Preprocess the Data

Perform feature engineering and preprocessing:

\`\`\`bash
python preprocessing.py
\`\`\`

### 5. Generate and Compare DAGs

Compare DAGs generated by PC and GES algorithms:

\`\`\`bash
python compare_pc_ges_dag.py
\`\`\`

### 6. Run the Causal & Counterfactual Pipeline

Execute the full pipeline for causal modeling and counterfactual generation:

\`\`\`bash
python causal_counterfactual_pipeline.py
\`\`\`

---

## 📝 Notes

- Ensure the \`data/\` directory is writable, as processed data will be saved there.
- The pipeline assumes an active internet connection for downloading NHL data.
- For issues with Graphviz or \`pygraphviz\`, verify that system dependencies are correctly installed.

---

## 🔧 Troubleshooting

- **Graphviz errors**: Reinstall Graphviz dependencies and ensure the paths in the \`pygraphviz\` installation command match your system.
- **Data download issues**: Check your internet connection or verify the NHL API endpoints in \`data_acquisition.py\`.

---

## 📚 Dependencies

Key Python libraries (listed in \`requirements.txt\`):
- \`dowhy\` for causal inference
- \`xgboost\` for predictive modeling
- \`pygraphviz\` for DAG visualization
- \`pandas\`, \`numpy\` for data processing

---
EOF
